# ================================
# ğŸŒª Noctria Kingdom: Airflow Dockerfile
# ãƒ™ãƒ¼ã‚¹: Airflow 2.7.3 + Python 3.10
# ================================

FROM apache/airflow:2.7.3-python3.10

# ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
WORKDIR /opt/airflow

# ç’°å¢ƒå¤‰æ•°
ENV PYTHONUNBUFFERED=1 \
    PYTHONPATH=/noctria_kingdom \
    AIRFLOW_HOME=/opt/airflow

# requirements + constraints ãƒ•ã‚¡ã‚¤ãƒ«è¿½åŠ 
COPY requirements.txt /requirements.txt
ADD https://raw.githubusercontent.com/apache/airflow/constraints-2.7.3/constraints-3.10.txt /constraints.txt

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN pip install --upgrade pip && \
    pip install --no-cache-dir -r /requirements.txt --constraint /constraints.txt
