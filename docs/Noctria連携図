flowchart TD

  %% --- Veritas PDCA/ãƒã‚¹ã‚¿ãƒ¼/å†è©•ä¾¡/å†é€DAGç¾¤ ---
  subgraph Veritas_Master[Veritas Master/PDCA/Replayãƒ©ã‚¤ãƒ³]
    VGM["veritas_master_dag.py<br>ğŸ‘‘ Masterçµ±æ‹¬DAG"]
    VPDCA["veritas_pdca_dag.py<br>ğŸ” PDCAè‡ªå‹•ãƒ«ãƒ¼ãƒ—"]
    VG["veritas_generate_dag.py<br>ğŸ”¨ æˆ¦ç•¥ç”Ÿæˆ"]
    VE["veritas_eval_dag.py<br>ğŸ“ æˆ¦ç•¥ä¸€æ‹¬è©•ä¾¡"]
    VA["veritas_act_record_dag.py<br>ğŸ—’ï¸ Actï¼ˆæ¡ç”¨ï¼‰è¨˜éŒ²"]
    VS["veritas_eval_single_dag.py<br>ğŸ•¹ï¸ å˜ä½“å†è©•ä¾¡"]
    VR["veritas_recheck_dag.py<br>ğŸ” æˆ¦ç•¥å†è©•ä¾¡"]
    VPUSH["veritas_push_dag.py<br>â¬†ï¸ æˆ¦ç•¥Push"]
    VREPLAY["veritas_replay_dag.py<br>ğŸ” ãƒ­ã‚°ã‹ã‚‰å†é€"]
  end

  %% --- Kingdom AIå±¤ ---
  subgraph Kingdomçµ±æ²»AI[Noctria Kingdom çµ±æ²»å±¤]
    RC["noctria_kingdom_royal_council_dag.py<br>ğŸ‘‘ å¾¡å‰ä¼šè­°DAG"]
    KING["king_noctria.py<br>çµ±åˆAI"]
  end

  %% --- ã‚¹ãƒˆãƒ©ãƒ†ã‚¸AI/DAGç¾¤ ---
  subgraph æˆ¦ç•¥AIç¾¤[å„æˆ¦ç•¥AIãƒ»æœªæ¥äºˆæ¸¬ãƒ»ãƒªã‚¹ã‚¯DAG]
    PA["prometheus_strategy_dag.py<br>ğŸ”® æœªæ¥äºˆæ¸¬"]
    AA["aurus_strategy_dag.py<br>ğŸ¯ ç·åˆåˆ†æ"]
    LA["levia_strategy_dag.py<br>âš¡ ã‚¹ã‚­ãƒ£ãƒ«ãƒ”ãƒ³ã‚°"]
    NA["noctus_strategy_dag.py<br>ğŸ›¡ï¸ ãƒªã‚¹ã‚¯è©•ä¾¡"]
  end

  %% --- Master/PDCA/Replayãƒ•ãƒ­ãƒ¼ ---
  VGM -- "æˆ¦ç•¥ç”Ÿæˆ" --> VG
  VGM -- "è©•ä¾¡" --> VE
  VGM -- "æ¡ç”¨è¨˜éŒ²" --> VA
  VGM -- "GitHubPush" --> VPUSH
  VPDCA -- "æˆ¦ç•¥ç”Ÿæˆ" --> VG
  VPDCA -- "è©•ä¾¡" --> VE
  VPDCA -- "æ¡ç”¨è¨˜éŒ²" --> VA
  VPDCA -- "GitHubPush" --> VPUSH

  %% --- Veritasè©•ä¾¡å¾Œã®æµã‚Œ ---
  VG -- "æˆ¦ç•¥ãƒ•ã‚¡ã‚¤ãƒ«" --> VE
  VE -- "è©•ä¾¡æ¸ˆæˆ¦ç•¥" --> VA
  VA -- "æ¡ç”¨æˆ¦ç•¥æƒ…å ±" --> RC
  VA -- "Pushè¦æ±‚" --> VPUSH
  VPUSH -- "æ¡ç”¨æˆ¦ç•¥ã®GitHubè¨˜éŒ²" --> RC

  %% --- Actãƒ­ã‚°/PDCAå±¥æ­´ã‚‚å¾¡å‰ä¼šè­°ã¸ -->
  VS -- "å†è©•ä¾¡æƒ…å ±" --> RC
  VR -- "å†è©•ä¾¡æƒ…å ±" --> RC

  %% --- å†é€DAGã®æµã‚Œï¼ˆReplayï¼‰ ---
  VREPLAY -- "PDCAãƒ­ã‚°ã‹ã‚‰å†é€å‘½ä»¤" --> RC

  %% --- å¾¡å‰ä¼šè­°/çµ±åˆAIãƒ•ãƒ­ãƒ¼ ---
  RC --> KING

  %% --- æˆ¦ç•¥AIç¾¤ã¨çµ±åˆAIã®é€£æºã‚¤ãƒ¡ãƒ¼ã‚¸ ---
  KING -- "æˆ¦ç•¥åˆ¤æ–­/æœ€çµ‚æ„æ€æ±ºå®š" --> PA
  KING -- "æˆ¦ç•¥åˆ¤æ–­/æœ€çµ‚æ„æ€æ±ºå®š" --> AA
  KING -- "æˆ¦ç•¥åˆ¤æ–­/æœ€çµ‚æ„æ€æ±ºå®š" --> LA
  KING -- "æˆ¦ç•¥åˆ¤æ–­/æœ€çµ‚æ„æ€æ±ºå®š" --> NA

  classDef pdca fill:#f9f9cc,stroke:#e9c900,stroke-width:2px;
  class VPDCA,VGM,VPUSH,VR,VREPLAY pdca;
