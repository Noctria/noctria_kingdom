```mermaid
flowchart TD

%% ======= STYLES (GitHub-safe) =======
classDef plan fill:#262e44,stroke:#47617a,color:#d8e0f7;
classDef ai fill:#2f3136,stroke:#a97e2c,color:#ffe476;
classDef do fill:#3d2d2d,stroke:#cc9999,color:#ffcccc;
classDef todo fill:#323232,stroke:#ff9f43,color:#ffd8a8;
classDef obs fill:#1e2a36,stroke:#5dade2,color:#d6eaf8;

%% ======= PLAN å±¤ =======
subgraph PLAN["ğŸ—ºï¸ PLANå±¤ (src/plan_data)"]
  COLLECT["collector.py<br/>å¸‚å ´ãƒ‡ãƒ¼ã‚¿åé›†"]:::plan
  FEATURES["features.py<br/>ç‰¹å¾´é‡ç”Ÿæˆ"]:::plan
  FEATDF["FeatureBundle å‡ºåŠ›<br/>(df + context)<br/>â€»ææ¡ˆâ‘¡: å…±é€šã‚·ã‚°ãƒãƒãƒ£å¯¾å¿œã¯æœªå®Ÿè£…"]:::plan
  ANALYZER["analyzer.py<br/>è¦å› æŠ½å‡º"]:::plan
  STATS["statistics.py<br/>KPI é›†è¨ˆ"]:::plan
end

%% ======= AI è‡£ä¸‹ï¼ˆHermesã¯å®Ÿè¡Œéä»‹å…¥ï¼‰ =======
subgraph AI_UNDERLINGS["ğŸ¤– è‡£ä¸‹AIç¾¤ (src/strategies/)"]
  AURUS["ğŸ¯ Aurus<br/><b>propose()</b>"]:::ai
  LEVIA["âš¡ Levia<br/><b>propose()</b>"]:::ai
  PROM["ğŸ”® Prometheus<br/><b>predict_future()</b>"]:::ai
  VERITAS["ğŸ§  Veritas<br/><b>propose()</b>"]:::ai
  HERMES["ğŸ¦‰ Hermes<br/>LLMèª¬æ˜<br/><b>propose()</b><br/><i>(å®Ÿè¡Œéä»‹å…¥)</i>"]:::ai
end

%% ======= æ±ºå®šçµ±åˆï¼†ãƒªã‚¹ã‚¯ã‚²ãƒ¼ãƒˆï¼ˆæœªå®Ÿè£…ï¼‰ =======
DECISION["RoyalDecisionEngine<br/>ææ¡ˆçµ±åˆãƒ»ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°<br/>(ææ¡ˆâ‘  æœªå®Ÿè£…)"]:::todo
NOCTUSGATE["Noctus Gate<br/>å¿…é ˆãƒªã‚¹ã‚¯ãƒ•ã‚£ãƒ«ã‚¿/ãƒ­ãƒƒãƒˆåˆ¶é™<br/>(ææ¡ˆâ‘£ æœªå®Ÿè£…)"]:::todo
QUALITY["DataQualityGate<br/>missing_ratio / data_lag ç›£è¦– â†’ FLAT/Fallback<br/>(ææ¡ˆâ‘¤ æœªå®Ÿè£…)"]:::todo
PROFILES["profiles.yaml<br/>é‡ã¿/å°å…¥ç‡(7â†’30â†’100%) è¨­å®š<br/>(ææ¡ˆâ‘¥ æœªå®Ÿè£…)"]:::todo
CONTRACTS["Contracts:<br/>FeatureBundle / StrategyProposal / OrderRequest<br/>(ææ¡ˆâ‘¡ æœªå®Ÿè£…)"]:::todo
TRACEID["Correlation-ID (trace_id) ã‚’å…¨çµŒè·¯ã§ç¶™æ‰¿<br/>(ææ¡ˆâ‘¢ æœªå®Ÿè£…)"]:::todo

%% ======= Do å±¤ï¼ˆå—ã‘æ¸¡ã—å…ˆï¼‰ =======
subgraph DO_LAYER["âš”ï¸ Doå±¤ï¼ˆå—ã‘æ¸¡ã—å…ˆï¼‰"]
  ORDER["order_execution.py<br/>ç™ºæ³¨APIæœ¬ä½“"]:::do
end

%% ======= Demo / å›å¸°ãƒ†ã‚¹ãƒˆåŒ–ï¼ˆæœªå®Ÿè£…ï¼‰ =======
subgraph DEMO["Demo / Tests"]
  GOLDEN["plan_to_all_minidemo.py<br/>â†’ ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³å›å¸°ãƒ†ã‚¹ãƒˆåŒ– (ææ¡ˆâ‘¦ æœªå®Ÿè£…)"]:::todo
end

%% ======= Observabilityï¼ˆè¨ˆæ¸¬ãƒã‚¤ãƒ³ãƒˆæŠœç²‹ï¼‰ =======
subgraph OBS["ğŸ”­ Observabilityï¼ˆè¨ˆæ¸¬ãƒã‚¤ãƒ³ãƒˆæŠœç²‹ï¼‰"]
  OBS_PLAN["obs_plan_runs<br/>phase=collector/features/statistics<br/>â€»trace_id åˆ— è¿½åŠ  (ææ¡ˆâ‘§ æœªå®Ÿè£…)"]:::obs
  OBS_INFER["obs_infer_calls<br/>AI propose/predict latency<br/>â€»trace_id åˆ— è¿½åŠ  (ææ¡ˆâ‘§ æœªå®Ÿè£…)"]:::obs
  OBS_ORD["obs_orders<br/>decision metrics / reasons<br/>â€»trace_id åˆ— è¿½åŠ  (ææ¡ˆâ‘§ æœªå®Ÿè£…)"]:::obs
  OBS_TRD["obs_trades<br/>fill/reject/slippage<br/>â€»trace_id åˆ— è¿½åŠ  (ææ¡ˆâ‘§ æœªå®Ÿè£…)"]:::obs
  OBS_ALT["obs_alerts<br/>quality/risk alerts<br/>â€»trace_id åˆ— è¿½åŠ  (ææ¡ˆâ‘§ æœªå®Ÿè£…)"]:::obs
end

%% ======= PLAN ãƒ•ãƒ­ãƒ¼ =======
COLLECT --> FEATURES --> STATS
FEATURES --> FEATDF
FEATDF --> ANALYZER
ANALYZER --> HERMES

%% ======= Contractsï¼ˆæœªå®Ÿè£…ã®é€£æºï¼‰ =======
FEATDF -. "uses" .-> CONTRACTS
AURUS -. "returns" .-> CONTRACTS
LEVIA -. "returns" .-> CONTRACTS
PROM  -. "returns" .-> CONTRACTS
VERITAS -. "returns" .-> CONTRACTS

%% ======= æ±ºå®šçµ±åˆãƒ‘ã‚¹ï¼ˆæœªå®Ÿè£…ï¼‰ =======
FEATDF --> QUALITY
QUALITY --> DECISION
AURUS --> DECISION
LEVIA --> DECISION
PROM --> DECISION
VERITAS --> DECISION
PROFILES -. "config" .-> DECISION
DECISION --> NOCTUSGATE
NOCTUSGATE --> ORDER

%% ======= Demo çµŒè·¯ =======
GOLDEN --> FEATDF
GOLDEN -.-> AURUS
GOLDEN -.-> LEVIA
GOLDEN -.-> PROM
GOLDEN -.-> VERITAS
GOLDEN -.-> HERMES

%% ======= Observability ã‚¿ãƒƒãƒ— =======
COLLECT  -->|log| OBS_PLAN
FEATURES -->|log| OBS_PLAN
STATS    -->|log| OBS_PLAN
AURUS    -->|log| OBS_INFER
LEVIA    -->|log| OBS_INFER
PROM     -->|log| OBS_INFER
VERITAS  -->|log| OBS_INFER
DECISION -->|log| OBS_ORD
NOCTUSGATE -->|alert| OBS_ALT
ORDER    -->|log| OBS_TRD

%% ======= trace_id æ³¨é‡ˆï¼ˆæœªå®Ÿè£…ï¼‰ =======
FEATDF -. "[trace_id]" .-> AURUS
FEATDF -. "[trace_id]" .-> LEVIA
FEATDF -. "[trace_id]" .-> PROM
FEATDF -. "[trace_id]" .-> VERITAS
DECISION -. "[trace_id]" .-> ORDER

%% NOTE: ã‚¯ãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã¯ä¸€éƒ¨ãƒ¬ãƒ³ãƒ€ãƒ©ã§å¼¾ã‹ã‚Œã‚‹ãŸã‚ç„¡åŠ¹åŒ–
%% click GOLDEN "https://github.com/your_repo/src/plan_data/plan_to_all_minidemo.py" "ã‚µãƒ³ãƒ—ãƒ«å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«"
```
