flowchart TD

%% --- PDCA-Plan自動化ワークフロー ---
subgraph PDCA_Plan
  COL[collector.py<br>PlanDataCollector<br>データ集約]
  FE[features.py<br>FeatureEngineer<br>特徴量]
  AN[analyzer.py<br>PlanAnalyzer<br>要因分析]
  ST[statistics.py<br>PlanStatistics<br>統計集計]
  RUN[run_pdca_plan_workflow.py<br>ワークフロー]
end

COL --> FE
FE --> AN
COL --> ST
FE --> AN
AN --> RUN
ST --> RUN

%% --- Core戦略AI群 ---
subgraph AI_Strategies
  AURUS["aurus_singularis.py<br>市場総合AI"]
  LEVIA["levia_tempest.py<br>スキャルピング"]
  NOCTUS["noctus_sentinella.py<br>リスク管理"]
  PROME["prometheus_oracle.py<br>未来予測"]
  HERMES["hermes_cognitor.py<br>LLM要約"]
end

%% --- AI統括/王 ---
subgraph KINGDOM_CORE
  KING["king_noctria.py<br>王AI中枢"]
end

KING --> AURUS
KING --> LEVIA
KING --> NOCTUS
KING --> PROME
KING --> HERMES

%% --- Data・PathConfig ---
subgraph CORE
  PATHCFG["path_config.py<br>パス管理"]
  LOGGER["logger.py<br>ログ"]
end

%% --- GUI連携 ---
subgraph GUI
  DASH["dashboard.py"]
  PDCA_SUMM["pdca_summary.py"]
end

RUN -- JSON/統計 --> PDCA_SUMM
ST -- KPI --> PDCA_SUMM
PATHCFG -.-> KING
PATHCFG -.-> AURUS
PATHCFG -.-> PROME
PATHCFG -.-> FE
LOGGER -.-> KING

%% --- DAG・自動化 ---
subgraph DAGS
  DAG1["veritas_pdca_dag.py"]
  DAG2["noctria_kingdom_pdca_dag.py"]
  DAG3["pdca_plan_summary_dag.py"]
end

DAG3 --> RUN

