flowchart TD

  %% --- Planå±¤ï¼ˆè¨ˆç”»ãƒ»ç‰¹å¾´é‡ç”Ÿæˆï¼‰ ---
  subgraph Plan["ğŸ—ºï¸ PLANå±¤: å¸‚å ´åˆ†æãƒ»ç‰¹å¾´é‡ç”Ÿæˆ (src/plan_data/)"]
    COLLECTOR["collector.py<br>ğŸŸ© ãƒ‡ãƒ¼ã‚¿åé›†<br>yfinance/FRED/ãƒ‹ãƒ¥ãƒ¼ã‚¹/ã‚¤ãƒ™ãƒ³ãƒˆ"]
    FEATURES["features.py<br>ğŸŸ¦ ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ãƒ»ãƒã‚¯ãƒ­ç‰¹å¾´é‡ç”Ÿæˆ"]
    STATISTICS["statistics.py<br>ğŸŸª KPIé›†è¨ˆ/çµ±è¨ˆ"]
    ANALYZER["analyzer.py<br>ğŸŸ§ è¦å› æŠ½å‡ºãƒ»è‡ªç„¶è¨€èªèª¬æ˜"]
    PLAN_WORKFLOW["run_pdca_plan_workflow.py<br>ğŸŸ« PDCA Planãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼"]
    DF_OUTPUT["å‡ºåŠ›: <br><b>æ¨™æº–ç‰¹å¾´é‡DataFrame</b>ï¼ˆè©³ç´°ä¸‹è¨˜ï¼‰"]
    COLLECTOR --> FEATURES
    FEATURES --> STATISTICS
    FEATURES --> ANALYZER
    ANALYZER --> PLAN_WORKFLOW
    STATISTICS --> PLAN_WORKFLOW
    PLAN_WORKFLOW --> DF_OUTPUT
  end

  %% --- æ¨™æº–ç‰¹å¾´é‡ä¾‹ ---
  subgraph DF["ğŸ—ƒï¸ æ¨™æº–ç‰¹å¾´é‡DataFrame"]
    DF_COLUMNS["ä¸»ãªã‚«ãƒ©ãƒ :<br>
    - Date, {Asset}_Close, {Asset}_Volume, {Asset}_Return<br>
    - {Asset}_Volatility_5d/20d, {Asset}_RSI_14d, {Asset}_GC_Flag<br>
    - News_Count, News_Positive, News_Negative, News_Positive_Ratio, ...<br>
    - CPIAUCSL_Value, UNRATE_Value, FEDFUNDS_Value, ...<br>
    - FOMC, CPI, NFP, ...ã‚¤ãƒ™ãƒ³ãƒˆç³»<br>
    - ä»–: ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«/ãƒã‚¯ãƒ­ç‰¹å¾´é‡ï¼ˆè©³ç´°ï¼šfeatures.pyå‚ç…§ï¼‰"]
  end
  DF_OUTPUT --> DF_COLUMNS

  %% --- å„æˆ¦ç•¥AIï¼ˆè‡£ä¸‹AIï¼‰ ---
  subgraph Strategies["ğŸ¤– å„AIè‡£ä¸‹ï¼ˆsrc/strategies/ï¼‰"]
    AURUS["aurus_singularis.py<br>ğŸŸ¦ ç·åˆå¸‚å ´åˆ†æAI<br>ï¼ˆML/ä¸»è¦ãƒ†ã‚¯ãƒ»ãƒã‚¯ãƒ­ç‰¹å¾´é‡ï¼‰"]
    LEVIA["levia_tempest.py<br>ğŸŸ§ ã‚¹ã‚­ãƒ£ãƒ«ãƒ”ãƒ³ã‚°AI<br>ï¼ˆå³æ™‚ãƒ‡ãƒ¼ã‚¿/é–¾å€¤åå¿œå‹ï¼‰"]
    NOCTUS["noctus_sentinella.py<br>ğŸŸ« ãƒªã‚¹ã‚¯è©•ä¾¡AI<br>ï¼ˆRiskManager+å¸‚å ´ãƒ‡ãƒ¼ã‚¿ï¼‰"]
    PROMETHEUS["prometheus_oracle.py<br>ğŸŸª æœªæ¥äºˆæ¸¬AI<br>ï¼ˆML/æ™‚ç³»åˆ—ç‰¹å¾´é‡ï¼‰"]
    HERMES["hermes_cognitor.py<br>ğŸŸ¦ LLMè¦ç´„ãƒ»èª¬æ˜AI<br>ï¼ˆPlanç‰¹å¾´é‡ï¼‹è¦å› èª¬æ˜ï¼‰"]
    VERITAS["veritas_machina.py<br>ğŸŸ© MLæˆ¦ç•¥ç”Ÿæˆ/è©•ä¾¡AI"]
  end

  DF_OUTPUT -- "dict/DFã§å—ã‘æ¸¡ã—\nï¼ˆè‡£ä¸‹ã”ã¨ã«è¦ç´ æŠ½å‡ºãƒ»å‰å‡¦ç†ï¼‰" --> AURUS
  DF_OUTPUT --> LEVIA
  DF_OUTPUT --> NOCTUS
  DF_OUTPUT --> PROMETHEUS
  DF_OUTPUT --> VERITAS
  ANALYZER -- "è¦å› æŠ½å‡ºï¼‹ç‰¹å¾´é‡dict" --> HERMES

  %% --- ç‹ï¼ˆNoctriaï¼‰ã«ã‚ˆã‚‹çµ±æ²» ---
  subgraph King["ğŸ‘‘ Noctriaï¼ˆä¸­å¤®çµ±æ²»AIï¼‰"]
    KING["king_noctria.py<br>PDCAçµ±æ‹¬ãƒ»è‡£ä¸‹AIåˆ¶å¾¡"]
  end

  AURUS -- "signal/è§£é‡ˆ/è¦ç´„" --> KING
  LEVIA -- "signal/è§£é‡ˆ" --> KING
  NOCTUS -- "ãƒªã‚¹ã‚¯åˆ¤å®š" --> KING
  PROMETHEUS -- "æœªæ¥äºˆæ¸¬" --> KING
  HERMES -- "LLMèª¬æ˜/è¦ç´„" --> KING
  VERITAS -- "æˆ¦ç•¥ææ¡ˆ/è©•ä¾¡" --> KING

  %% --- ãƒ‡ã‚¶ã‚¤ãƒ³èª¿æ•´: æ˜æš—é…è‰²+å¯èª­æ€§å‘ä¸Š ---
  style COLLECTOR fill:#2176ae,color:#fff
  style FEATURES fill:#2a9d8f,color:#fff
  style STATISTICS fill:#6649b8,color:#fff
  style ANALYZER fill:#e68653,color:#fff
  style PLAN_WORKFLOW fill:#8367c7,color:#fff
  style DF_OUTPUT fill:#1d3557,color:#fff
  style DF_COLUMNS fill:#d7eefa,color:#333

  style AURUS fill:#2980b9,color:#fff
  style LEVIA fill:#e89c4d,color:#111
  style NOCTUS fill:#574f7d,color:#fff
  style PROMETHEUS fill:#512b81,color:#fff
  style HERMES fill:#5fa8d3,color:#111
  style VERITAS fill:#52b788,color:#fff

  style KING fill:#FFD700,color:#2d2d2d,stroke:#222,stroke-width:3px
  style Plan stroke:#aaa,stroke-width:2px
  style Strategies stroke:#aaa,stroke-width:2px
  style King stroke:#bca136,stroke-width:2px
