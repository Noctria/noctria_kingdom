flowchart TD
  %% === AI/çµ±æ²»ã‚³ã‚¢ ===
  KingNoctria[src/core/king_noctria.py<br>ğŸ‘‘ KingNoctria]
  VeritasMachina[src/veritas/veritas_machina.py<br>ğŸ§  VeritasMachina]
  PrometheusOracle[src/strategies/prometheus_oracle.py<br>ğŸ”® PrometheusOracle]
  AurusSingularis[src/strategies/aurus_singularis.py<br>âš”ï¸ AurusSingularis]
  LeviaTempest[src/strategies/levia_tempest.py<br>âš¡ LeviaTempest]
  NoctusSentinella[src/strategies/noctus_sentinella.py<br>ğŸ›¡ï¸ NoctusSentinella]
  HermesCognitor[src/strategies/hermes_cognitor.py<br>ğŸ¦‰ HermesCognitor]
  PlanStatistics[src/plan_data/statistics.py<br>PlanStatistics]
  AnomalyDetector[src/plan_data/anomaly_detector.py<br>AnomalyDetector]
  PlanCollector[src/plan_data/collector.py<br>PlanDataCollector]
  FeatureEngineer[src/plan_data/features.py<br>FeatureEngineer]
  DataLoader[src/core/data_loader.py<br>MarketDataFetcher]
  Logger[src/core/logger.py<br>Logger]

  %% === çµ±æ²»API/ãƒ«ãƒ¼ãƒˆ ===
  KingRoutes[noctria_gui/routes/king_routes.py<br>API: /api/king]
  Dashboard[noctria_gui/routes/dashboard.py<br>Dashboard]
  PDCARecheck[noctria_gui/routes/pdca_recheck.py]
  PDCA[noctria_gui/routes/pdca.py]
  
  %% === Airflow DAG ===
  NoctriaKingdomDAG[airflow_docker/dags/noctria_kingdom_dag.py]
  AurusDAG[airflow_docker/dags/aurus_strategy_dag.py]
  LeviaDAG[airflow_docker/dags/levia_strategy_dag.py]
  PrometheusDAG[airflow_docker/dags/prometheus_strategy_dag.py]
  NoctusDAG[airflow_docker/dags/noctus_strategy_dag.py]
  HermesDAG[airflow_docker/dags/hermes_strategy_dag.py]
  VeritasPushDAG[airflow_docker/dags/veritas_push_dag.py]

  %% === æˆ¦ç•¥ç”Ÿæˆ/è©•ä¾¡ ===
  VeritasGenerate[src/veritas/veritas_generate_strategy.py]
  VeritasEval[src/veritas/evaluate_veritas.py]
  VeritasStrategyGen[src/veritas/strategy_generator.py]
  SimpleModel[src/veritas/models/ml_model/simple_model.py]

  %% === ãƒ‡ãƒ¼ã‚¿ ===
  VeritasEvalLog[data/stats/veritas_eval_result.json]

  %% === ä¾å­˜é–¢ä¿‚ ===
  KingRoutes --API/GUIå‘¼ã³å‡ºã—--> KingNoctria
  KingNoctria --è©•è­°ä¼š/æ„æ€æ±ºå®š--> VeritasMachina
  KingNoctria --è©•è­°ä¼š/æ„æ€æ±ºå®š--> PrometheusOracle
  KingNoctria --è©•è­°ä¼š/æ„æ€æ±ºå®š--> AurusSingularis
  KingNoctria --è©•è­°ä¼š/æ„æ€æ±ºå®š--> LeviaTempest
  KingNoctria --è©•è­°ä¼š/æ„æ€æ±ºå®š--> NoctusSentinella
  KingNoctria --è©•è­°ä¼š/æ„æ€æ±ºå®š--> HermesCognitor
  KingNoctria --DAGãƒˆãƒªã‚¬ãƒ¼/çµ±æ²»API--> NoctriaKingdomDAG
  KingNoctria --DAGãƒˆãƒªã‚¬ãƒ¼/çµ±æ²»API--> AurusDAG
  KingNoctria --DAGãƒˆãƒªã‚¬ãƒ¼/çµ±æ²»API--> LeviaDAG
  KingNoctria --DAGãƒˆãƒªã‚¬ãƒ¼/çµ±æ²»API--> PrometheusDAG
  KingNoctria --DAGãƒˆãƒªã‚¬ãƒ¼/çµ±æ²»API--> NoctusDAG
  KingNoctria --DAGãƒˆãƒªã‚¬ãƒ¼/çµ±æ²»API--> HermesDAG
  KingNoctria --DAGãƒˆãƒªã‚¬ãƒ¼/çµ±æ²»API--> VeritasPushDAG
  VeritasMachina --CLI/è©•ä¾¡ãƒ­ã‚°--> VeritasGenerate
  VeritasMachina --CLI/è©•ä¾¡ãƒ­ã‚°--> VeritasEval
  VeritasMachina --ç”Ÿæˆãƒ»è©•ä¾¡ã‚¹ã‚¯ãƒªãƒ—ãƒˆ--> VeritasStrategyGen
  VeritasMachina --è©•ä¾¡ãƒ­ã‚°èª­è¾¼--> VeritasEvalLog
  VeritasEval --å‡ºåŠ›--> VeritasEvalLog
  VeritasStrategyGen --ãƒ¢ãƒ‡ãƒ«--> SimpleModel
  PlanStatistics --è©•ä¾¡ãƒ­ã‚°dict/df--> AnomalyDetector
  PlanStatistics --ã‚³ãƒ¬ã‚¯ã‚¿df--> PlanCollector
  PlanStatistics --ç‰¹å¾´é‡--> FeatureEngineer
  Dashboard --çµ±è¨ˆ/ç•°å¸¸è¦ç´„--> PlanStatistics
  Dashboard --ç•°å¸¸è¦ç´„--> AnomalyDetector
  PlanCollector --å„ç¨®å¤–éƒ¨API/CSV--> PlanStatistics
  PDCA --çµ±è¨ˆ/è©•ä¾¡ãƒ­ã‚°--> PlanStatistics
  PDCARecheck --å†è©•ä¾¡API/DAG--> KingNoctria
  NoctriaKingdomDAG --ã‚³ã‚¢åˆ¤å®š/è©•è­°ä¼š--> KingNoctria
  NoctriaKingdomDAG --è¦³æ¸¬ãƒ‡ãƒ¼ã‚¿--> DataLoader
  DataLoader --API/å±¥æ­´ç®¡ç†--> PlanCollector
  Logger --å…¨ä½“ãƒ­ã‚¬ãƒ¼/violations--> All

  %% === ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼/ä¾‹ ===
  VeritasEvalLog --dictå…¥åŠ›--> AnomalyDetector

  %% === ã‚³ãƒ¡ãƒ³ãƒˆ ===
  classDef main fill:#181f38,stroke:#5474b8,stroke-width:2px,color:#eee;
  class KingNoctria,VeritasMachina,PrometheusOracle,AurusSingularis,LeviaTempest,NoctusSentinella,HermesCognitor,NoctriaKingdomDAG main;

