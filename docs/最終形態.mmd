flowchart TD

%% --- PDCA-Planè‡ªå‹•åŒ–ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ ---
subgraph PDCA_Plan[PDCA-Plan Workflow (src/plan_data/)]
  COL[collector.py<br>PlanDataCollector<br>ğŸ“¦ãƒ‡ãƒ¼ã‚¿é›†ç´„]
  FE[features.py<br>FeatureEngineer<br>ğŸ”¬ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°]
  AN[analyzer.py<br>PlanAnalyzer<br>ğŸ§ è¦å› åˆ†æãƒ»LLMãƒ©ãƒ™ãƒ«]
  ST[statistics.py<br>PlanStatistics<br>ğŸ“Šçµ±è¨ˆé›†è¨ˆ]
  RUN[run_pdca_plan_workflow.py<br>ğŸª¢ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼çµ±æ‹¬]
end

COL --> FE
FE --> AN
COL --> ST
FE --> AN
AN --> RUN
ST --> RUN

%% --- Coreæˆ¦ç•¥AIç¾¤ ---
subgraph AI_Strategies["æˆ¦ç•¥AIç¾¤ (src/strategies/)"]
  AURUS["aurus_singularis.py<br>å¸‚å ´ç·åˆAI"]
  LEVIA["levia_tempest.py<br>ã‚¹ã‚­ãƒ£ãƒ«ãƒ”ãƒ³ã‚°AI"]
  NOCTUS["noctus_sentinella.py<br>ãƒªã‚¹ã‚¯ç®¡ç†å®˜"]
  PROME["prometheus_oracle.py<br>æœªæ¥äºˆæ¸¬AI"]
  HERMES["hermes_cognitor.py<br>LLMè¦ç´„AI"]
end

%% --- AIçµ±æ‹¬/ç‹ ---
subgraph KINGDOM_CORE["Noctria Kingdom Central"]
  KING["king_noctria.py<br>ç‹AIä¸­æ¢"]
end

KING -->|é€²è¨€/çµ±æ²»/èª¬æ˜è¦æ±‚|AURUS
KING --> LEVIA
KING --> NOCTUS
KING --> PROME
KING --> HERMES

%% --- Dataãƒ»PathConfig ---
subgraph CORE["core"]
  PATHCFG["path_config.py<br>ãƒ‘ã‚¹ç®¡ç†"]
  LOGGER["logger.py<br>ãƒ­ã‚°åŸºç›¤"]
end

%% --- GUIé€£æºãƒ©ã‚¤ãƒ³ï¼ˆä»£è¡¨ä¾‹ï¼‰---
subgraph GUI["noctria_gui/"]
  DASH["routes/dashboard.py<br>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰"]
  PDCA_SUMM["routes/pdca_summary.py"]
end

RUN -- JSONå‡ºåŠ›/çµ±è¨ˆ --> PDCA_SUMM
ST -- KPIãƒ»çµ±è¨ˆå€¤ --> PDCA_SUMM
PATHCFG -.-> KING
PATHCFG -.-> AURUS
PATHCFG -.-> PROME
PATHCFG -.-> FE
LOGGER -.-> KING

%% --- DAGãƒ»è‡ªå‹•åŒ– ---
subgraph DAGS["airflow_docker/dags/"]
  DAG1["veritas_pdca_dag.py"]
  DAG2["noctria_kingdom_pdca_dag.py"]
  DAG3["pdca_plan_summary_dag.py"]
end

DAG3 -->|PDCAãƒ—ãƒ©ãƒ³å®Ÿè¡Œ|RUN

