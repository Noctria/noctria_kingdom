flowchart TD

subgraph DAGS
  VGEN["veritas_generate_dag.py"]
  VEVAL["veritas_eval_dag.py"]
  VPDCA["veritas_pdca_dag.py"]
  NK_PDCA["noctria_kingdom_pdca_dag.py"]
  PDCA_SUMDAG["pdca_plan_summary_dag.py"]
  VACT["veritas_act_record_dag.py"]
  VRECHECK["veritas_recheck_dag.py"]
end

subgraph PLAN_DATA
  COL[collector.py]
  FE[features.py]
  AN[analyzer.py]
  ST[statistics.py]
  RUN[run_pdca_plan_workflow.py]
end

subgraph STRATEGIES
  AURUS["aurus_singularis.py"]
  LEVIA["levia_tempest.py"]
  NOCTUS["noctus_sentinella.py"]
  PROME["prometheus_oracle.py"]
  HERMES["hermes_cognitor.py"]
end

subgraph KINGDOM
  KING["king_noctria.py"]
end

%% --- DAGSからplan_data/AI/kingなどへのフロー ---
PDCA_SUMDAG -- calls --> RUN
RUN --> COL
RUN --> FE
RUN --> AN
RUN --> ST

VGEN -- strategy_gen --> AURUS
VGEN -- strategy_gen --> LEVIA
VGEN -- strategy_gen --> NOCTUS
VGEN -- strategy_gen --> PROME
VGEN -- strategy_gen --> HERMES

VEVAL -- eval --> AURUS
VEVAL -- eval --> NOCTUS

VPDCA -- orchestrates --> KING
NK_PDCA -- orchestrates --> KING

VACT -- calls --> KING
VRECHECK -- calls --> KING

KING --> AURUS
KING --> LEVIA
KING --> NOCTUS
KING --> PROME
KING --> HERMES

%% コア参照
KING -.-> COL
KING -.-> RUN

