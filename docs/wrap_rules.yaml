rules:
  - file: "apis/Do-Layer-Contract.md"
    partials_root: "docs/_partials/apis/Do-Layer-Contract"
    keep_heading: true
    sections:
      - heading_regex: "^##\\s*1\\)\\s*スコープ\\s*&\\s*原則"
        slug: "01_scope_principles"
        title: "スコープ & 原則（最新）"
      - heading_regex: "^##\\s*2\\)\\s*フロー（概観）"
        slug: "02_flow_overview"
        title: "フロー（概観）"
      - heading_regex: "^##\\s*3\\)\\s*エンティティ（Schemas）"
        slug: "03_entities_schemas"
        title: "エンティティ（Schemas）"
      - heading_regex: "^##\\s*4\\)\\s*`order_request`（Plan\\s*→\\s*Do）"
        slug: "04_order_request"
        title: "`order_request`（Plan → Do）"
      - heading_regex: "^##\\s*5\\)\\s*`exec_result`（Do\\s*→\\s*Check）"
        slug: "05_exec_result"
        title: "`exec_result`（Do → Check）"
      - heading_regex: "^##\\s*6\\)\\s*`audit_order`（WORM\\s*監査）"
        slug: "06_audit_order"
        title: "`audit_order`（WORM 監査）"
      - heading_regex: "^##\\s*7\\)\\s*数値精度・丸め（Financial\\s*Correctness）"
        slug: "07_financial_correctness"
        title: "数値精度・丸め（Financial Correctness）"
      - heading_regex: "^##\\s*8\\)\\s*Idempotency\\s*/\\s*Concurrency"
        slug: "08_idempotency_concurrency"
        title: "Idempotency / Concurrency"
      - heading_regex: "^##\\s*9\\)\\s*エラーコード（対照表）"
        slug: "09_error_codes"
        title: "エラーコード（対照表）"
      - heading_regex: "^##\\s*10\\)\\s*サンプル（テスト用最小セット）"
        slug: "10_samples_min"
        title: "サンプル（テスト用最小セット）"
      - heading_regex: "^##\\s*11\\)\\s*契約テスト（CI\\s*要件）"
        slug: "11_contract_tests"
        title: "契約テスト（CI 要件）"
      - heading_regex: "^##\\s*12\\)\\s*変更履歴"
        slug: "12_changelog"
        title: "変更履歴"
