{
  "command": [
    "ruff",
    "check",
    "/mnt/d/noctria_kingdom/tests/backtesting/dqn_backtest.py",
    "/mnt/d/noctria_kingdom/tests/backtesting.py",
    "/mnt/d/noctria_kingdom/tests/conftest.py",
    "/mnt/d/noctria_kingdom/tests/execute_order_test.py",
    "/mnt/d/noctria_kingdom/tests/forward_test_meta_ai.py",
    "/mnt/d/noctria_kingdom/tests/integration_test_noctria.py",
    "/mnt/d/noctria_kingdom/tests/run_ai_trading_loop.py",
    "/mnt/d/noctria_kingdom/tests/stress_tests.py",
    "/mnt/d/noctria_kingdom/tests/test_decision_fallback_size.py",
    "/mnt/d/noctria_kingdom/tests/test_dqn_agent.py",
    "/mnt/d/noctria_kingdom/tests/test_dummy.py",
    "/mnt/d/noctria_kingdom/tests/test_floor_mod.py",
    "/mnt/d/noctria_kingdom/tests/test_floor_mod_gpu.py",
    "/mnt/d/noctria_kingdom/tests/test_harmonia_rerank.py",
    "/mnt/d/noctria_kingdom/tests/test_meta_ai_env_rl.py",
    "/mnt/d/noctria_kingdom/tests/test_meta_ai_rl.py",
    "/mnt/d/noctria_kingdom/tests/test_meta_ai_rl_longrun.py",
    "/mnt/d/noctria_kingdom/tests/test_meta_ai_rl_real_data.py",
    "/mnt/d/noctria_kingdom/tests/test_minidemo_smoke.py",
    "/mnt/d/noctria_kingdom/tests/test_mt5_connection.py",
    "/mnt/d/noctria_kingdom/tests/test_noctria.py",
    "/mnt/d/noctria_kingdom/tests/test_noctria_master_ai.py",
    "/mnt/d/noctria_kingdom/tests/test_noctus_gate_block.py",
    "/mnt/d/noctria_kingdom/tests/test_path_config.py",
    "/mnt/d/noctria_kingdom/tests/test_policy_guard.py",
    "/mnt/d/noctria_kingdom/tests/test_quality_gate_alerts.py",
    "/mnt/d/noctria_kingdom/tests/test_trace_and_integration.py",
    "/mnt/d/noctria_kingdom/tests/test_trace_decision_e2e.py",
    "/mnt/d/noctria_kingdom/tests/unit_tests.py"
  ],
  "returncode": 1,
  "stdout": "F841 Local variable `actions_tensor` is assigned to but never used\n  --> tests/backtesting/dqn_backtest.py:35:13\n   |\n33 |             states_tensor = torch.tensor(states, dtype=torch.float32)\n34 |             next_states_tensor = torch.tensor(next_states, dtype=torch.float32)\n35 |             actions_tensor = torch.tensor(actions, dtype=torch.int64)\n   |             ^^^^^^^^^^^^^^\n36 |             rewards_tensor = torch.tensor(rewards, dtype=torch.float32)\n37 |             dones_tensor = torch.tensor(dones, dtype=torch.float32)\n   |\nhelp: Remove assignment to unused variable `actions_tensor`\n\nF841 Local variable `rewards_tensor` is assigned to but never used\n  --> tests/backtesting/dqn_backtest.py:36:13\n   |\n34 |             next_states_tensor = torch.tensor(next_states, dtype=torch.float32)\n35 |             actions_tensor = torch.tensor(actions, dtype=torch.int64)\n36 |             rewards_tensor = torch.tensor(rewards, dtype=torch.float32)\n   |             ^^^^^^^^^^^^^^\n37 |             dones_tensor = torch.tensor(dones, dtype=torch.float32)\n   |\nhelp: Remove assignment to unused variable `rewards_tensor`\n\nF841 Local variable `dones_tensor` is assigned to but never used\n  --> tests/backtesting/dqn_backtest.py:37:13\n   |\n35 |             actions_tensor = torch.tensor(actions, dtype=torch.int64)\n36 |             rewards_tensor = torch.tensor(rewards, dtype=torch.float32)\n37 |             dones_tensor = torch.tensor(dones, dtype=torch.float32)\n   |             ^^^^^^^^^^^^\n38 |\n39 |             # Q値の計算\n   |\nhelp: Remove assignment to unused variable `dones_tensor`\n\nE402 Module level import not at top of file\n  --> tests/conftest.py:41:1\n   |\n40 | # --- Fixtures ---------------------------------------------------------------\n41 | import logging\n   | ^^^^^^^^^^^^^^\n42 | import typing as t\n43 | import json as _json\n   |\n\nE402 Module level import not at top of file\n  --> tests/conftest.py:42:1\n   |\n40 | # --- Fixtures ---------------------------------------------------------------\n41 | import logging\n42 | import typing as t\n   | ^^^^^^^^^^^^^^^^^^\n43 | import json as _json\n44 | import pytest\n   |\n\nE402 Module level import not at top of file\n  --> tests/conftest.py:43:1\n   |\n41 | import logging\n42 | import typing as t\n43 | import json as _json\n   | ^^^^^^^^^^^^^^^^^^^^\n44 | import pytest\n   |\n\nE402 Module level import not at top of file\n  --> tests/conftest.py:44:1\n   |\n42 | import typing as t\n43 | import json as _json\n44 | import pytest\n   | ^^^^^^^^^^^^^\n   |\n\nF403 `from core.path_config import *` used; unable to detect undefined names\n --> tests/execute_order_test.py:1:1\n  |\n1 | from core.path_config import *\n  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n2 |\n3 | from order_execution import OrderExecution  # execution/order_execution.py\n  |\n\nF403 `from core.path_config import *` used; unable to detect undefined names\n --> tests/forward_test_meta_ai.py:1:1\n  |\n1 | from core.path_config import *\n  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n2 | #!/usr/bin/env python3\n3 | # coding: utf-8\n  |\n\nF405 `PROCESSED_DATA_DIR` may be undefined, or defined from star imports\n  --> tests/forward_test_meta_ai.py:21:31\n   |\n20 |     # 実際の市場データ（MT5からダウンロードしたデータなど）\n21 |     real_time_data_path = str(PROCESSED_DATA_DIR / \"preprocessed_usdjpy_with_fundamental.csv\")\n   |                               ^^^^^^^^^^^^^^^^^^\n22 |     real_time_data = load_real_time_data(real_time_data_path)\n   |\n\nF403 `from core.path_config import *` used; unable to detect undefined names\n --> tests/run_ai_trading_loop.py:1:1\n  |\n1 | from core.path_config import *\n  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n2 | # tests/run_ai_trading_loop.py\n  |\n\nF841 Local variable `observation` is assigned to but never used\n  --> tests/test_meta_ai_rl_longrun.py:27:5\n   |\n25 |     # 例: 実際のヒストリカルデータファイルから観測データ生成（省略可）\n26 |     # ここではランダム観測データを利用\n27 |     observation = np.random.rand(12)\n   |     ^^^^^^^^^^^\n28 |\n29 |     # 環境の初期化\n   |\nhelp: Remove assignment to unused variable `observation`\n\nF841 Local variable `obs` is assigned to but never used\n  --> tests/test_meta_ai_rl_longrun.py:30:5\n   |\n29 |     # 環境の初期化\n30 |     obs = meta_ai.reset()\n   |     ^^^\n31 |\n32 |     # 例: 50,000ステップの長期学習\n   |\nhelp: Remove assignment to unused variable `obs`\n\nFound 13 errors.\nNo fixes available (5 hidden fixes can be enabled with the `--unsafe-fixes` option).\n",
  "stderr": "",
  "timestamp_utc": "2025-09-15T05:41:58.762465+00:00"
}