[pytest]
# まずは軽量テストだけ収集（既存設定を維持）
python_files = test_decision_fallback_size.py test_harmonia_rerank.py

# デフォルトは「重い/外部依存/GPU」を除外して軽量ループを高速化
# 例:
#   軽量のみ（デフォルト）:     pytest
#   重テストのみ:                pytest -m heavy
#   重+GPU:                      pytest -m "heavy or gpu"
#   すべて実行:                  pytest -m "heavy or gpu or external or not heavy"
addopts = -q --import-mode=importlib -m "not heavy and not gpu and not external"

markers =
    heavy: 長時間 or 大規模 or 強化学習など重い依存を要するテスト
    gpu: GPU必須の推論/学習を含むテスト
    external: 外部API/実機/ネットワーク接続が前提のテスト
    slow: 数十秒以上かかるが重依存ではないテスト（任意）
