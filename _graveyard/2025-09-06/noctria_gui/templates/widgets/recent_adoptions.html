<!-- noctria_gui/templates/widgets/recent_adoptions.html -->
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>{{ title or "🧩 直近採用タグ" }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0b1220; --card:#111a2b; --text:#e6eefc; --muted:#9fbad6; --accent:#23c4ff33; --border:#24324a;
    }
    html,body{background:transparent;color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";margin:0}
    .wrap{padding:8px 10px}
    h3{margin:0 0 8px 0;font-size:14px;color:var(--muted)}
    .grid{display:grid;gap:10px;grid-template-columns:repeat({{ cols|int }},minmax(0,1fr))}
    .card{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:10px;box-shadow:0 0 10px var(--accent)}
    .tag{font-weight:700}
    .muted{color:var(--muted)}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
    .small{font-size:12px}
    .link{color:#8cd3ff;text-decoration:none}
    .hdr{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .hdr .note{font-size:12px;color:var(--muted)}
    .err{padding:10px;border:1px solid #f66;background:#330; border-radius:8px;color:#ffd}
  </style>
</head>
<body>
<div class="wrap">
  <div class="hdr">
    <h3>{{ title or "🧩 直近採用タグ" }}</h3>
    <div class="note mono small">pattern=<code>{{ pattern }}</code></div>
  </div>

  {% if error %}
    <div class="err">⚠️ Git 取得に失敗しました: <span class="mono small">{{ error }}</span></div>
  {% endif %}

  {% if tags and tags|length > 0 %}
    <div class="grid">
      {% for t in tags %}
        <div class="card">
          <div class="row">
            <span class="tag mono">{{ t.name }}</span>
          </div>
          <div class="small muted" style="margin-top:4px">
            <div>date: <span class="mono">{{ t.commit_iso }}</span></div>
            <div>sha : <span class="mono">{{ t.commit_hash[:8] }}</span></div>
          </div>
          {% if t.subject %}
            <div class="small" style="margin-top:6px">“{{ t.subject }}”</div>
          {% endif %}
          <div class="row small" style="margin-top:8px">
            <a class="link" href="/decisions?q={{ t.name | urlencode }}" target="_top">🔍 Decision 検索</a>
            <a class="link" href="/tags?selected={{ t.name | urlencode }}" target="_top">🏷 タグ一覧</a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="muted small">該当タグは見つかりませんでした。</div>
  {% endif %}
</div>
</body>
</html>
