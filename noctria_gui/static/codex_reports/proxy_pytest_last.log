.......................................E
==================================== ERRORS ====================================
__________________ ERROR at setup of test_minidemo_writes_db ___________________
file /mnt/d/noctria_kingdom/tests/test_trace_and_integration.py, line 16
  @pytest.mark.integration
  def test_minidemo_writes_db(monkeypatch, stub_collector, stub_strategies, tmp_data_dir):
E       fixture 'stub_collector' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, capture_alerts, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, json_metadata, metadata, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/mnt/d/noctria_kingdom/tests/test_trace_and_integration.py:16
==================================== PASSES ====================================
______________________________ test_floor_mod_cpu ______________________________
----------------------------- Captured stdout call -----------------------------
CPU FloorMod result: tf.Tensor([123456789         0], shape=(2,), dtype=int32)
______________________________ test_floor_mod_gpu ______________________________
----------------------------- Captured stdout call -----------------------------
GPU FloorMod result: tf.Tensor([123456789         0], shape=(2,), dtype=int32)
________________ test_quality_gate_emits_alert_on_missing_ratio ________________
------------------------------ Captured log call -------------------------------
WARNING  QUALITY.MISSING_RATIO:quality_gate.py:717 {'kind': 'QUALITY.MISSING_RATIO', 'missing_ratio': 0.12, 'threshold': 0.1, 'trace': 'test-trace-quality-001', 'level': 'WARNING'}
WARNING  QUALITY:quality_gate.py:719 {'kind': 'QUALITY', 'event': 'MISSING_RATIO', 'missing_ratio': 0.12, 'threshold': 0.1, 'trace': 'test-trace-quality-001'}
WARNING  QUALITY.MISSING_RATIO:quality_gate.py:1084 ALERT
WARNING  QUALITY.MISSING_RATIO:quality_gate.py:1148 {'kind': 'QUALITY.MISSING_RATIO', 'missing_ratio': 0.12, 'threshold': 0.1, 'trace': 'test-trace-quality-001', 'level': 'WARNING'}
WARNING  QUALITY.MISSING_RATIO:quality_gate.py:1193 ALERT
WARNING  QUALITY.MISSING_RATIO:quality_gate.py:1232 {'kind': 'QUALITY.MISSING_RATIO', 'missing_ratio': 0.12, 'trace': 'test-trace-quality-001'}
WARNING  QUALITY.MISSING_RATIO:quality_gate.py:1351 {'kind': 'QUALITY.MISSING_RATIO', 'missing_ratio': 0.12, 'threshold': 0.1, 'trace': 'test-trace-quality-001', 'level': 'WARNING'}
WARNING  QUALITY.MISSING_RATIO:quality_gate.py:1426 {'kind': 'QUALITY.MISSING_RATIO', 'missing_ratio': 0.12, 'threshold': 0.1, 'trace': 'test-trace-quality-001', 'level': 'WARNING'}
__________________ test_quality_gate_emits_alert_on_data_lag ___________________
------------------------------ Captured log call -------------------------------
WARNING  QUALITY.DATA_LAG:quality_gate.py:740 {'kind': 'QUALITY.DATA_LAG', 'data_lag_min': 45.0, 'trace': 'test-trace-quality-002', 'level': 'WARNING'}
WARNING  QUALITY:quality_gate.py:742 {'kind': 'QUALITY', 'event': 'DATA_LAG', 'data_lag_min': 45.0, 'trace': 'test-trace-quality-002'}
WARNING  QUALITY.DATA_LAG:quality_gate.py:1087 ALERT
WARNING  QUALITY.DATA_LAG:quality_gate.py:1152 {'kind': 'QUALITY.DATA_LAG', 'data_lag_min': 45.0, 'trace': 'test-trace-quality-002', 'level': 'WARNING'}
WARNING  QUALITY.DATA_LAG:quality_gate.py:1197 ALERT
WARNING  QUALITY.DATA_LAG:quality_gate.py:1236 {'kind': 'QUALITY.DATA_LAG', 'data_lag_min': 45.0, 'trace': 'test-trace-quality-002'}
WARNING  QUALITY.DATA_LAG:quality_gate.py:1359 {'kind': 'QUALITY.DATA_LAG', 'data_lag_min': 45.0, 'trace': 'test-trace-quality-002', 'level': 'WARNING'}
WARNING  QUALITY.DATA_LAG:quality_gate.py:1434 {'kind': 'QUALITY.DATA_LAG', 'data_lag_min': 45.0, 'trace': 'test-trace-quality-002', 'level': 'WARNING'}
- generated xml file: /mnt/d/noctria_kingdom/src/codex_reports/pytest_last.xml -
=========================== short test summary info ============================
PASSED tests/test_decision_fallback_size.py::test_fallback_size_reason_matches_implementation
PASSED tests/test_dummy.py::test_basic
PASSED tests/test_floor_mod.py::test_floor_mod_cpu
PASSED tests/test_floor_mod_gpu.py::test_floor_mod_gpu
PASSED tests/test_harmonia_rerank.py::test_harmonia_rerank_sets_risk_adjusted_and_orders
PASSED tests/test_harmonia_rerank.py::test_harmonia_rerank_penalizes_with_lag_and_missing_ratio
PASSED tests/test_noctus_gate_block.py::test_noctus_gate_blocks_and_emits_alert
PASSED tests/test_path_config.py::test_path_exists[BASE_DIR]
PASSED tests/test_path_config.py::test_path_exists[AIRFLOW_DIR]
PASSED tests/test_path_config.py::test_path_exists[CORE_DIR]
PASSED tests/test_path_config.py::test_path_exists[VERITAS_DIR]
PASSED tests/test_path_config.py::test_path_exists[STRATEGIES_DIR]
PASSED tests/test_path_config.py::test_path_exists[OFFICIAL_STRATEGIES_DIR]
PASSED tests/test_path_config.py::test_path_exists[GENERATED_STRATEGIES_DIR]
PASSED tests/test_path_config.py::test_path_exists[EXECUTION_DIR]
PASSED tests/test_path_config.py::test_path_exists[DATA_DIR]
PASSED tests/test_path_config.py::test_path_exists[RAW_DATA_DIR]
PASSED tests/test_path_config.py::test_path_exists[PROCESSED_DATA_DIR]
PASSED tests/test_path_config.py::test_path_exists[FUNDAMENTAL_DATA_DIR]
PASSED tests/test_path_config.py::test_path_exists[MODELS_DIR]
PASSED tests/test_path_config.py::test_path_exists[LATEST_MODELS_DIR]
PASSED tests/test_path_config.py::test_path_exists[ARCHIVE_MODELS_DIR]
PASSED tests/test_path_config.py::test_path_exists[LLM_SERVER_DIR]
PASSED tests/test_path_config.py::test_path_exists[GUI_DIR]
PASSED tests/test_path_config.py::test_path_exists[EXPERTS_DIR]
PASSED tests/test_path_config.py::test_path_exists[TOOLS_DIR]
PASSED tests/test_path_config.py::test_path_exists[TESTS_DIR]
PASSED tests/test_path_config.py::test_path_exists[DOCS_DIR]
PASSED tests/test_path_config.py::test_path_exists[AIRFLOW_LOG_DIR]
PASSED tests/test_path_config.py::test_path_exists[VERITAS_EVAL_LOG]
PASSED tests/test_policy_guard.py::test_inventor_can_propose_patch_basic
PASSED tests/test_policy_guard.py::test_inventor_blocked_when_no_tests
PASSED tests/test_policy_guard.py::test_governance_alignment_boundary_blocks
PASSED tests/test_policy_guard.py::test_governance_failing_tests_blocks
PASSED tests/test_policy_guard.py::test_harmonia_alignment_required
PASSED tests/test_policy_guard.py::test_harmonia_alignment_ok
PASSED tests/test_quality_gate_alerts.py::test_quality_gate_emits_alert_on_missing_ratio
PASSED tests/test_quality_gate_alerts.py::test_quality_gate_emits_alert_on_data_lag
PASSED tests/test_trace_and_integration.py::test_trace_id_format
ERROR tests/test_trace_and_integration.py::test_minidemo_writes_db
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
39 passed, 2 warnings, 1 error in 33.76s

