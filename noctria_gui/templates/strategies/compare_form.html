<!-- noctria_gui/templates/compare_form.html -->
{% extends "base_hud.html" %}

{% block title %}⚔️ Strategy Comparison - Noctria Kingdom{% endblock %}
{% block header_icon %}<i class="fas fa-balance-scale"></i>{% endblock %}
{% block header_title %}STRATEGY COMPARISON{% endblock %}
{% block header_nav %}
<a href="/dashboard" class="nav-item-back"><i class="fas fa-tachometer-alt"></i><span>DASHBOARD</span></a>
{% endblock %}

{% block content %}
<div class="hud-panel selection-panel">
  <h2 class="panel-title">SELECT STRATEGIES TO COMPARE</h2>
  <form method="get" action="/statistics/compare" onsubmit="return setKeys()">
    <input type="hidden" name="mode" value="{{ mode }}">
    <input type="hidden" name="sort" value="check">
    <input type="hidden" id="keys" name="{{ mode }}s" value="">

    <div id="options" class="strategy-list" style="max-height: 60vh; overflow-y: auto; display: flex; flex-direction: column; gap: 0.5rem;">
      {% for s in all_keys %}
        <label class="strategy-item-checkbox">
          <input type="checkbox" value="{{ s }}">
          <span class="custom-checkbox"></span>
          <span style="margin-left: 0.5rem;">{{ s }}</span>
        </label>
      {% else %}
        <p style="padding: 2rem; text-align: center;">No strategies found for this mode.</p>
      {% endfor %}
    </div>

    <div style="margin-top: 2rem;">
      <button type="submit" class="hud-btn"><i class="fas fa-chart-bar"></i> 比較する</button>
    </div>
  </form>
</div>
{% endblock %}

{% block scripts %}
<script>
  function setKeys() {
    const boxes = document.querySelectorAll('#options input[type=checkbox]');
    const selected = [];
    boxes.forEach(box => {
      if (box.checked) selected.push(box.value);
    });
    document.getElementById('keys').value = selected.join(',');
    return true;
  }
</script>
{% endblock %}
