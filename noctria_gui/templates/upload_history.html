<!DOCTYPE html>
<html>
<head>
    <title>🗂 アップロード戦略履歴</title>
    <style>
        body { font-family: sans-serif; }
        .block {
            border: 1px solid #ccc;
            margin: 10px;
            padding: 10px;
            background: #f9f9f9;
        }
        pre {
            background: #eee;
            padding: 10px;
            overflow-x: auto;
        }
        .actions {
            margin-top: 10px;
        }
        .actions form {
            display: inline-block;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <h1>🗂 アップロード戦略履歴一覧</h1>
    <a href="/pdca">← ダッシュボードに戻る</a>
    <hr>

    {% for record in histories %}
        <div class="block">
            <h2>📁 {{ record.id }}</h2>
            <div class="actions">
                <form method="post" action="/upload-history/re-evaluate">
                    <input type="hidden" name="strategy_id" value="{{ record.id }}">
                    <button type="submit">🔁 再評価</button>
                </form>
                <form method="post" action="/upload-history/delete" onsubmit="return confirm('本当に削除しますか？');">
                    <input type="hidden" name="strategy_id" value="{{ record.id }}">
                    <button type="submit">🗑 削除</button>
                </form>
            </div>

            {% for f in record.files %}
                <p><strong>📄 {{ f.name }}</strong></p>
                <pre>{{ f.content }}</pre>
            {% endfor %}
        </div>
    {% endfor %}
</body>
</html>
