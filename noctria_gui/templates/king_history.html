<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>👑 評議会ログ履歴 - Noctria Kingdom</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <h1>👑 評議会ログ履歴</h1>

  {% if error %}
    <div style="color: red; padding: 1em; border: 1px solid red; margin-bottom: 1em;">
      ⚠️ エラー: {{ error }}
    </div>
  {% endif %}

  {% if logs %}
  <table class="table">
    <thead>
      <tr>
        <th>🕒 日時</th>
        <th>📜 最終判断</th>
        <th>📘 Veritas</th>
        <th>📈 Prometheus</th>
        <th>🗡️ Aurus</th>
        <th>🌊 Levia</th>
        <th>🛡️ Noctus</th>
      </tr>
    </thead>
    <tbody>
      {% for log in logs %}
      <tr>
        <td>{{ log.timestamp }}</td>
        <td>
          <strong>
            {{ log.result.final_decision or log.decision.final_decision or "-" }}
          </strong>
        </td>
        <td>{{ log.result.veritas or log.decision.veritas or "-" }}</td>
        <td>
          {% set pf = log.result.prometheus_forecast or log.decision.prometheus_forecast %}
          {% if pf and pf.forecast is defined %}
            {{ pf.forecast }}
          {% else %}
            -
          {% endif %}
        </td>
        <td>{{ log.result.aurus or log.decision.aurus or "-" }}</td>
        <td>{{ log.result.levia or log.decision.levia or "-" }}</td>
        <td>{{ log.result.noctus or log.decision.noctus or "-" }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p>📭 評議会の履歴はまだ存在しません。</p>
  {% endif %}
</body>
</html>
