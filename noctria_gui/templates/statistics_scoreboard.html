{% extends "base.html" %}

{% block title %}ğŸ“Š ã‚¿ã‚°åˆ¥ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰ - Noctria Kingdom{% endblock %}

{% block content %}
<h2 class="text-2xl font-bold mb-4">ğŸ“Š ã‚¿ã‚°åˆ¥çµ±åˆã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰</h2>

<!-- ğŸ”½ ã‚½ãƒ¼ãƒˆé¸æŠ -->
<form method="get" action="/statistics/scoreboard" class="mb-4">
  <label class="font-semibold mr-2">ğŸ”½ ã‚½ãƒ¼ãƒˆé …ç›®:</label>
  <select name="sort" onchange="this.form.submit()" class="px-2 py-1 border rounded dark:bg-gray-800 dark:text-white">
    <option value="count" {% if sort_key == "count" %}selected{% endif %}>ğŸ“¦ ä»¶æ•°ï¼ˆå¤šã„é †ï¼‰</option>
    <option value="avg_win" {% if sort_key == "avg_win" %}selected{% endif %}>âš” å‹ç‡ï¼ˆé«˜ã„é †ï¼‰</option>
    <option value="avg_dd" {% if sort_key == "avg_dd" %}selected{% endif %}>ğŸ“‰ æœ€å¤§DDï¼ˆå¤§ãã„é †ï¼‰</option>
  </select>
</form>

<!-- ğŸ“‹ ã‚¿ã‚°åˆ¥ã‚¹ã‚³ã‚¢è¡¨ -->
<table class="min-w-full border-collapse bg-white dark:bg-gray-800 rounded shadow">
  <thead>
    <tr class="bg-gray-100 dark:bg-gray-700 text-left">
      <th class="px-4 py-2 border-b">ğŸ· ã‚¿ã‚°å</th>
      <th class="px-4 py-2 border-b">ğŸ“¦ ä»¶æ•°</th>
      <th class="px-4 py-2 border-b">âš” å¹³å‡å‹ç‡ï¼ˆ%ï¼‰</th>
      <th class="px-4 py-2 border-b">ğŸ“‰ æœ€å¤§DDï¼ˆ%ï¼‰</th>
    </tr>
  </thead>
  <tbody>
    {% for tag, stats in tag_stats %}
    <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
      <td class="px-4 py-2 border-b font-medium">{{ tag }}</td>
      <td class="px-4 py-2 border-b">{{ stats.count }}</td>
      <td class="px-4 py-2 border-b">{{ "%.1f"|format(stats.avg_win) if stats.avg_win is not none else "-" }}</td>
      <td class="px-4 py-2 border-b">{{ "%.1f"|format(stats.avg_dd) if stats.avg_dd is not none else "-" }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- ğŸ”½ CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ -->
<!--
<div class="mt-4">
  <a href="/statistics/scoreboard/export?sort={{ sort_key }}" class="inline-block px-3 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition">
    ğŸ“ CSVå‡ºåŠ›
  </a>
</div>
-->

{% endblock %}
