{% extends "base_hud.html" %}

{% block title %}📤 Strategy Upload - Noctria Kingdom HUD{% endblock %}

{% block header_icon %}<i class="fas fa-upload"></i>{% endblock %}
{% block header_title %}UPLOAD & EVALUATE STRATEGY{% endblock %}
{% block header_nav %}
<a href="/dashboard" class="nav-item-back"><i class="fas fa-tachometer-alt"></i><span>DASHBOARD</span></a>
{% endblock %}

{% block content %}

<!-- ✅ アップロードフォーム -->
<div class="hud-panel">
    <h2 class="panel-title">STRATEGY FILE UPLOAD (.py)</h2>

    <form method="post" action="/upload-strategy" enctype="multipart/form-data" class="upload-form" style="display: flex; flex-direction: column; gap: 1rem;">
        <label for="file-upload" class="hud-btn" style="cursor: pointer;">
            <i class="fas fa-file-import"></i>
            <span id="file-name">CHOOSE FILE...</span>
        </label>
        <input id="file-upload" type="file" name="file" accept=".py" required style="display: none;">
        
        <button type="submit" class="hud-btn"><i class="fas fa-cogs"></i> UPLOAD & EVALUATE</button>
    </form>
</div>

<!-- ✅ 結果パネル（条件付き表示） -->
{% if result %}
<div class="hud-panel" style="margin-top: 1rem;">
    <h2 class="panel-title">EVALUATION RESULT</h2>
    <pre class="result-pre" style="background: rgba(0,0,0,0.3); padding: 1rem; overflow-x: auto; color: var(--text-color-base); border: 1px solid var(--panel-border); border-radius: 4px;">{{ result }}</pre>
</div>
{% endif %}

<script>
    document.getElementById('file-upload').addEventListener('change', function() {
        var fileName = this.files[0] ? this.files[0].name : 'CHOOSE FILE...';
        document.getElementById('file-name').textContent = fileName;
    });
</script>

{% endblock %}
